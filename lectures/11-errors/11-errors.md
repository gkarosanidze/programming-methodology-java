# ხშირი შეცდომები

ახლა მიმოვიხილავთ ხშირად დაშვებულ შეცდომებს.

წარმოვიდგინოთ ასეთი ამოცანა: კარელი ცარიელ სამყაროში დგას 1*1 უჯრაზე და გვინდა, რომ სამყაროს პირველი ხაზი შევავსოთ ბრილიანტებით. 
რადგან სამყარო 4*4 ზომისაა, თავიდანვე ჩნდება იდეა, რომ for ციკლით 4-ჯერ გავიმეოროთ მოქმედება - დავდოთ ბრილიანტი და წავიდეთ წინ. კოდი გამოიყურება შემდეგნაირად:
```java
public class BeeperLine extends SuperKarel {
	public void run() {
		for (int i = 0; i < 4; i++) {
			putBeeper();
			move();
		}
	}
}
```
თუმცა ამ კოდს აქვს შეცდომა. კერძოდ, მესამე იტერაციის შემდეგ კარელი 4*1 უჯრაზე დგას, მეოთხე იტერაციისას ბოლო უჯრაზე დადებს ბრილიანტს, მაგრამ წინ წასვლის დროს კარელი დაიბლოკება.
![Karel is blocked](/lectures/11-errors/Karel-Is-Blocked.png)

ჩვენ გვინდა, რომ მეოთხე იტერაციისას `move()` ბრძანება აღარ შესრულდეს. შეიძლება ვიფიქროთ, რომ ციკლით 4-ის მაგივრად 3-ჯერ გადავუყვეთ. თუმცა ამ შემთხვევაში კარელი ბოლო უჯრაზე აღარ დებს ბრილიანტს.
![Cycle with 3 iterations](/lectures/11-errors/Cycle-With-3-Iterations.png)

პრობლემა ისაა, რომ რამდენი ნაბიჯი უნდა გადადგას კარელმა და რამდენი ბრილიანტი უნდა დადოს, არ ემთხვევა ერთმანეთს - ჩვენს შემთხვევაში უნდა გადავდგათ 3 ნაბიჯი და დავდოთ 4 ბრილიანტი, რომ სამყაროს პირველი სტრიქონი ბრილიანტებით შეივსოს. რადგან ამ ორი მოქმედების რაოდენობები ერთმანეთს არ ემთხვევა, შეუძლებელია მათი ერთ for ციკლში გაერთიანება. თუ ჩვენს კოდს ციკლის გარეთ `putBeeper()`-ს დავამატებთ, პროგრამას ბაგი აღარ ექნება.
```java
public void run() {
		for (int i = 0; i < 3; i++) {
			putBeeper();
			move();
		}
		// extra put beeper
		putBeeper();
	}
```

![Fill row](/lectures/11-errors/Fill-Row.png)

ბაგი ინგლისური "bug"-ისგან მომდინარეობს. პირველი კომპიუტერული შეცდომა მაშინ აღმოაჩინეს, როდესაც ძველებური კომპიუტერის სადენზე მიმწვარ მწერს მიაგნეს. ეს ხარვეზი გრეის ჰოპერმა იპოვა. შეიძლება მთლად ზუსტი ახსნა არაა, რატომ უწოდებენ პროგრამულ ხარვეზებს ბაგებს, თუმცა საინტერესო ისტორიაა.
ჩვენს ამოცანას რომ დავუბრუნდეთ, საკმაოდ ცნობილი ბაგია და Fence Post Problem ჰქვია (ხანდახან Off By One Bug, იგივე OBOB-საც უწოდებენ) - ღობეში სარების რაოდენობა და სარებს შორის არსებული ფიცრების რაოდენობა ერთით ცდება ერთმანეთს.

მეორე ცნობილი პრობლემა უსასრული ციკლებია - როდესაც პროგრამა ციკლში უსასრულოდ ტრიალებს და არასოდეს არ წყდება. მაგალითად წარმოვიდგინოთ ასეთი კოდი:
```java
private void turnToWall() {
		while (leftIsClear()) {
			turnLeft();
		}
	}
```
ვთქვათ, გვაქვს ასეთი სამყარო
![3X3 world](/lectures/11-errors/3X3-World.png)
ამ შემთხვევაში კარელის ირგვლივ კედელი საერთოდ არ არის და ეს ციკლიც არასდროს არ დამთავრდება. მაქსიმალურად უნდა ვეცადოთ, უსასრულო ციკლები კოდში არ დავწეროთ.
